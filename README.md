# ğŸŒ‘ KAEDRA StoryEngine v7.15

<div align="center">

```
â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— 
â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘
â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘
â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘
â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•
```

**ğŸ¬ Elite Narrative Intelligence & Cinematic Universe Architect**

[![Python 3.10+](https://img.shields.io/badge/python-3.10+-blue.svg)](https://www.python.org/downloads/)
[![Vertex AI](https://img.shields.io/badge/Vertex%20AI-Gemini%203-orange)](https://cloud.google.com/vertex-ai)
[![Rich UI](https://img.shields.io/badge/Console-Rich%20Live-purple)](https://github.com/Textualize/rich)
[![Voice](https://img.shields.io/badge/Voice-Wispr%20Flow-green)](https://www.wispr.ai/)
[![Lights](https://img.shields.io/badge/Hardware-LIFX%20%2B%20Razer-red)](#-hardware-integration)

[Features](#-core-features) â€¢ [Commands](#-writing-commands) â€¢ [Tools](#-engine-tools) â€¢ [Services](#-services) â€¢ [Agents](#-agents) â€¢ [Hardware](#-hardware-integration) â€¢ [Quick Start](#-quick-start)

</div>

---

## ğŸ¯ What is KAEDRA?

KAEDRA is a **Story Engine** and **Universe Architect** for deep narrative work. She orchestrates creative writing sessions, manages complex lore databases, controls ambient lighting, and automates the production pipeline for the **VeilVerse** cinematic universe.

---

## ğŸ”¥ Core Features

| Feature | Description |
|---------|-------------|
| ğŸ§  **Multi-Tier AI** | Gemini 3 Pro with thinking budgets and tiered generation |
| ğŸ“œ **World Registry** | Multi-save system with persistent world states |
| ğŸ¤– **Universe Automations** | Self-cleaning database (Canon, Timeline, Power scoring) |
| ğŸ¤ **Voice Dictation** | Wispr Flow integration for hands-free writing |
| ğŸ’¡ **Ambient Lighting** | LIFX bulbs + Razer Blade 15 keyboard sync |
| ğŸ“Ÿ **Rich Live UI** | "Writer Friendly" console with persistent footer |
| ğŸŒ™ **Night Mode** | Adaptive lighting with safety caps (11PM-8AM) |
| âš¡ **Smart Input** | Paste detection and raw terminal handling |

---

## ğŸ® Writing Commands

Use `:` prefix for commands. Natural language for writing.

### ğŸ“ Writing Flow
| Command | Description |
|---------|-------------|
| `:next` | â­ï¸ Advance to next Scene (resets Tension) |
| `:pov [name]` | ğŸ‘ï¸ Switch Point of View |
| `:freeze` | â„ï¸ Enter "Bullet Time" mode |
| `:god` | ğŸŒ Enter Worldbuilding/Lore mode |
| `:emotion [emo] [val]` | ğŸ’« Pulse specific emotion |
| `:quit` | ğŸ’¾ Save and Exit |

### ğŸ¤– Automation
| Command | Description |
|---------|-------------|
| `:automate` | ğŸ”„ Run Universe Automations (Canon, Timeline, Power) |
| `:roadmap new` | ğŸ“‹ Create project roadmap template |
| `:roadmap tasks` | âœ… Generate milestone tasks |
| `:roadmap diag` | ğŸ” 25 Expert Roadblock Checks |
| `:roadmap names` | ğŸ­ Character Authenticity Protocol |
| `:roadmap add` | ğŸ“… Sync to Google Tasks |
| `:roadmap sync` | ğŸ”— Sync to Notion + Drive |

### ğŸ’¡ Hardware
| Command | Description |
|---------|-------------|
| `:lights fire` | ğŸ”¥ Fire atmosphere (LIFX flame + Razer sparks) |
| `:lights restore` | â˜€ï¸ Restore baseline lighting |
| `:voice on` | ğŸ¤ Enable voice dictation |
| `:voice off` | ğŸ”‡ Disable voice dictation |

---

## ğŸ› ï¸ Engine Tools

AI-callable functions available during generation:

### ğŸ“š Lore & Notion
| Tool | Purpose |
|------|---------|
| `read_page_content` | ğŸ“– Read Notion page content |
| `list_universe_pages` | ğŸ“‚ List all lore pages |
| `update_page_content` | âœï¸ Edit Notion page |
| `run_lore_automations` | âš™ï¸ Canon promotion, retcon safety |
| `read_local_lore` | ğŸ“ Read local JSON lore files |
| `propose_canon_update` | ğŸ’¡ Suggest lore changes |

### ğŸ¬ Screenwriting
| Tool | Purpose |
|------|---------|
| `consult_director` | ğŸ¥ Screenwriting guidance (structure, character, twist, etc.) |
| `set_engine_mode` | ğŸ­ Switch writing mode |
| `adjust_emotion` | ğŸ’« Pulse emotional state |
| `clean_timeline_data` | ğŸ“… Auto-tag timeline eras |

### ğŸŒ World Building
| Tool | Purpose |
|------|---------|
| `ingest_youtube_content` | ğŸ“º Extract YouTube transcripts |
| `worldforge_from_youtube` | ğŸŒ± Create worlds from videos |

---

## ğŸ”Œ Services

### ğŸ’¡ Hardware Control
| Service | Description |
|---------|-------------|
| `lifx.py` (27KB) | ğŸ’¡ LIFX bulb control (colors, effects, scenes) |
| `razer.py` (13KB) | âŒ¨ï¸ Razer Chroma keyboard (per-key matrix, fire effect) |

### ğŸ¤ Voice & Audio
| Service | Description |
|---------|-------------|
| `wispr.py` (8KB) | ğŸ¤ Wispr Flow Desktop integration (dictation) |
| `wispr_cloud.py` (5KB) | â˜ï¸ Wispr Cloud API |
| `tts.py` (15KB) | ğŸ”Š Text-to-Speech (Gemini TTS) |
| `tts_chatterbox.py` (7KB) | ğŸ—£ï¸ Chatterbox TTS alternative |
| `mic.py` (7KB) | ğŸ™ï¸ Microphone input handling |
| `vad.py` (1KB) | ğŸ”ˆ Voice Activity Detection |
| `transcription.py` (3KB) | âœï¸ Speech-to-text conversion |

### ğŸ“‹ Productivity
| Service | Description |
|---------|-------------|
| `notion.py` (15KB) | ğŸ““ Notion API integration |
| `google_workspace.py` (5KB) | ğŸ“… Google Calendar/Tasks API |
| `invoices.py` (43KB) | ğŸ’° Invoice generation & tracking |

### ğŸŒ Research & Media
| Service | Description |
|---------|-------------|
| `video.py` (11KB) | ğŸ¬ Video ingestion & analysis |
| `web.py` (5KB) | ğŸŒ Web scraping & content extraction |
| `research.py` (5KB) | ğŸ” Research aggregation |
| `memory.py` (9KB) | ğŸ§  Long-term memory management |

### âš™ï¸ Core
| Service | Description |
|---------|-------------|
| `prompt.py` (9KB) | ğŸ“ Prompt engineering utilities |
| `logging.py` (7KB) | ğŸ“Š Session logging (JSON turns) |
| `fast_flow.py` (6KB) | âš¡ Fast streaming responses |

---

## ğŸ¤– Agents

Multi-agent system with specialized personas:

| Agent | Role | Description |
|-------|------|-------------|
| ğŸ—¡ï¸ **Blade** | System AI | Core orchestration and tool execution |
| ğŸ‘¥ **Council** | Multi-Agent | Collaborative decision-making |
| ğŸŒ‘ **Kaedra** | Story Persona | Narrative intelligence and writing |
| ğŸŒ™ **Nyx** | Dark Persona | Alternative creative voice |

---

## ğŸ¨ Hardware Integration

### ğŸ’¡ LIFX Smart Lights
| Feature | Description |
|---------|-------------|
| Color Control | HSB + Kelvin temperature |
| Flame Effect | Flickering fire ambiance |
| Breathe/Pulse | Rhythmic color cycling |
| Night Mode | Auto-dim after 11PM (35% red) |
| Day Mode | 4500K warm white @ 60% |
| Selector | Target specific groups/zones |

### âŒ¨ï¸ Razer Blade 15 Keyboard
| Feature | Description |
|---------|-------------|
| Static Colors | Solid color across all keys |
| Per-Key Matrix | 8x24 grid control (CHROMA_CUSTOM2) |
| Fire Animation | ğŸ”¥ Flickering sparks (threaded) |
| Wave Effect | Color sweep across keyboard |
| ChromaLink | 5 virtual LEDs for 3rd party devices |
| Breathing | Two-color pulse effect |

**Requirements:**
- Razer Synapse 4 Beta (fixes REST API errors)
- Enable "Kaedra Story Engine" in Chroma Apps

---

## ğŸŒ World Registry

Each world is a self-contained folder in `lore/worlds/`:

```
lore/worlds/world_id/
â”œâ”€â”€ world.json          # ğŸ­ Manifest (Mode, Scene, POV, Tension)
â”œâ”€â”€ world_bible.json    # ğŸ“– Characters, Lore, Locations
â”œâ”€â”€ timeline.json       # ğŸ“… Chronological Events
â”œâ”€â”€ canon.json          # âœ… Established Truths
â”œâ”€â”€ ingestion.json      # ğŸ“¥ Incoming Ideas Queue
â””â”€â”€ notifications.md    # ğŸ”” System Alerts
```

---

## ğŸ¤– Universe Automations

Trigger with `:automate` command:

### ğŸ“¦ Production Pipeline
- **Canon Promotion**: `Concept` â†’ `In Development`
- **Release Closeout**: `Released` â†’ `Completed` + `Phase 1` tag

### âœ… Consistency Checks
- **Timeline Validator**: Auto-tag Era (Ancient, Classical, Modern, Future)
- **Power Scoring**: Calculate `Importance Score` (30-95) from Power Level
- **Retcon Safety**: Rename + deactivate retconned entries

### ğŸ”— Connection & Media
- **Major Characters**: Alert for connection review
- **Media Alerts**: Ping social scheduler on release
- **Ingestion**: Move "Approved" ideas to Bible

---

## ğŸ—ï¸ Architecture

```
kaedra/
â”œâ”€â”€ ğŸ§  core/              # Core config & models
â”œâ”€â”€ ğŸ“œ story/             # Story Engine Logic
â”‚   â”œâ”€â”€ engine.py         # Main Event Loop (2400+ lines)
â”‚   â”œâ”€â”€ emotions.py       # Emotional Simulation
â”‚   â”œâ”€â”€ tension.py        # Narrative Tension Curve
â”‚   â”œâ”€â”€ lights.py         # LIFX + Razer Integration
â”‚   â”œâ”€â”€ doctrine.py       # Writing Doctrine (MICE, Barthes, etc.)
â”‚   â”œâ”€â”€ worldforge.py     # World Building Tools
â”‚   â””â”€â”€ tools/            # AI-Callable Functions
â”‚
â”œâ”€â”€ ğŸ”Œ services/          # External Integrations (19 modules)
â”œâ”€â”€ ğŸ¤– agents/            # AI Personas (Blade, Council, Kaedra, Nyx)
â”œâ”€â”€ ğŸŒ worlds/            # Universe Management
â”œâ”€â”€ ğŸ› ï¸ skills/            # Agent Capabilities
â””â”€â”€ ğŸ“‹ strategies/        # Generation Strategies
```

---

## ğŸš€ Quick Start

### Prerequisites
- Python 3.10+
- Google Cloud Vertex AI credentials
- LIFX Token (optional)
- Razer Synapse 4 Beta (optional)
- Wispr Flow Desktop (optional)

### Launch

```bash
# Enter the Story Engine
python -m kaedra.story.engine

# Or with voice mode
python -m kaedra.story.engine --voice
```

1. Select **N** to create a new world (or select existing)
2. Start writing naturally
3. Use `:automate` to clean your lore database

---

## ğŸ¨ Brand

**Who Visions LLC** | Strategic AI Intelligence

- ğŸ“¸ **Instagram**: [@aiwithdav3](https://instagram.com/aiwithdav3)
- ğŸ¬ **YouTube**: [Ai with Dav3](https://youtube.com/aiwithdav3)
- ğŸŒ **Website**: [WhoVisions.com](https://WhoVisions.com)

---

## ğŸ“œ License

Proprietary - Who Visions LLC Â© 2026
